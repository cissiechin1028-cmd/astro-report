# -*- coding: utf-8 -*-
"""
Page 4｜性格の違いとコミュニケーション
構造固定：
1. 話し方とテンポ
2. 問題への向き合い方
3. 価値観のズレ

テンプレ種類：
- Base（ベース型：今のコードで使っているタイプ）
- C：内向 × 外向 型
- D：感受性が高い × クール・理性的 型

それぞれ：
- body：本文（6〜7行）
- summary：「一言でいうと…」の一行
"""

PAGE4_TEMPLATES: dict[str, dict[str, dict[str, str]]] = {
    "Base": {
        "talk_tempo": {
            "body": """
{your_name} さんは、自分の気持ちを言葉にするまでに少し時間をかける、
じっくりタイプです。一方で、{partner_name} さんは、その場で感じたことを
すぐに言葉にする、テンポの速いタイプです。日常会話では、
片方が考えている間にもう一方がどんどん話してしまい、
「ちゃんと聞いてもらえていない」と感じる場面が出やすくなります。
""".strip(),
            "summary": "一言でいうと、二人の話し方は「スピードの違いを理解し合うことで心地よくつながれるペア」です。"
        },
        "problem_style": {
            "body": """
{your_name} さんは、問題が起きたときにまず全体を整理してから、
落ち着いて対処しようとします。{partner_name} さんは、感情の動きに敏感で、
まず気持ちを共有したいタイプです。同じ出来事でも、
片方は「どう解決するか」、もう片方は「どう感じたか」を大事にするため、
タイミングがずれると、すれ違いが生まれやすくなります。
""".strip(),
            "summary": "一言でいうと、二人は「解決志向」と「共感志向」が支え合う、心強いバランス型のペアです。"
        },
        "values_gap": {
            "body": """
{your_name} さんは、安定や責任感を重視する一方で、
{partner_name} さんは、変化やワクワク感を大切にする傾向があります。
お金の使い方や休日の過ごし方、将来のイメージなど、
小さな違いが積み重なると、「なんでわかってくれないの？」と
感じる瞬間が出てくるかもしれません。
""".strip(),
            "summary": "一言でいうと、二人の価値観は違いを否定するのではなく、「お互いの世界を広げ合うきっかけ」になる組み合わせです。"
        },
    },

    "C": {  # 内向 × 外向 型
        "talk_tempo": {
            "body": """
{your_name} さんは、まず相手の様子をよく観察してから、
自分の気持ちをゆっくり言葉にしていく、どちらかというと
内向的な話し方をしやすいタイプです。一方で、
{partner_name} さんは、その場の空気や感情を言葉に乗せて、
明るくテンポよく会話を回していく、外向的なコミュニケーションを
とりやすいでしょう。その違いから、{your_name} さんは
「少しペースが早い」と感じることがあり、
{partner_name} さんは「もっとリアクションがほしい」と思う場面が
あるかもしれません。ただ、お互いのスタイルを知っていくほど、
「静かに寄り添う時間」と「盛り上がる時間」のバランスが
取りやすくなります。
""".strip(),
            "summary": "一言でいうと、「内向さと外向さが混ざり合うことで会話に幅が出るペア」です。"
        },
        "problem_style": {
            "body": """
トラブルやすれ違いが起きたとき、{your_name} さんは一度ひとりで考えてから、
落ち着いたタイミングで話し合いたいタイプになりやすいでしょう。
いっぽう {partner_name} さんは、その場で気持ちを共有しながら、
「今どう感じているか」を率直に伝えたい傾向があります。
そのため、{your_name} さんは「少し時間がほしい」のに対して、
{partner_name} さんは「すぐに話してスッキリしたい」と思い、
解決までのスピード感にギャップが生まれやすくなります。
先に「じっくり考えたい派」と「その場で話したい派」であることを
共有しておくと、二人にとって無理のない話し合いのスタイルを
見つけやすくなります。
""".strip(),
            "summary": "一言でいうと、「考える時間」と「すぐ話すこと」のバランス調整がカギになるペアです。"
        },
        "values_gap": {
            "body": """
{your_name} さんは、自分の内側の感覚や静かな時間を大切にし、
少人数での深い関わりや、落ち着いた日常に安心感を覚えやすいタイプです。
{partner_name} さんは、人とのつながりや外の世界での刺激を通して、
元気をチャージしていく傾向があります。そのため、
休日の過ごし方や、付き合う人の範囲について、
「もう少し静かに過ごしたい」と「もう少し動きたい」の違いが
出ることがあるかもしれません。ただ、お互いの心地よさを
少しずつすり合わせていければ、二人の世界と外の世界のバランスが
ちょうどよく整っていきます。
""".strip(),
            "summary": "一言でいうと、「内側の時間と外の世界をどう配分するかがテーマになるペア」です。"
        },
    },

    "D": {  # 感受性が高い × クール・理性的 型
        "talk_tempo": {
            "body": """
{your_name} さんは、相手の表情や声のトーンなど、
雰囲気から多くの情報を受け取りながら話をする、感受性の高いタイプです。
そのため、言葉の裏にある気持ちやニュアンスを大切にしながら、
丁寧に会話を進めていこうとします。一方で、
{partner_name} さんは、結論や事実関係をはっきりさせることを重視し、
必要なことを簡潔に伝える、少しクールで理性的な話し方を
しやすいでしょう。この違いから、ときどき{your_name} さんは
「少しそっけない」と感じ、{partner_name} さんは
「回りくどく感じる」ことがあるかもしれません。
しかし、お互いのスタイルを知ることで、
「気持ちを受け止める会話」と「整理してくれる会話」の両方を
持てる関係になります。
""".strip(),
            "summary": "一言でいうと、「感情の言葉とロジックの言葉が補い合うペア」です。"
        },
        "problem_style": {
            "body": """
問題が起きたとき、{your_name} さんはまず自分や相手の気持ちに寄り添い、
「どう感じているか」を共有することで安心したいタイプです。
いっぽう {partner_name} さんは、原因や対策を整理しながら、
できるだけ冷静に状況を改善しようとする傾向があります。
そのため、{your_name} さんは「気持ちをわかってほしい」のに対して、
{partner_name} さんは「どうすれば良くなるか」を先に考えがちで、
優先順位の違いから、かみ合わない瞬間が生まれやすくなります。
先に「今日は共感してほしい」「今日は一緒に対策を考えたい」など、
求めていることを一言だけ伝えられると、二人の強みが活かしやすくなります。
""".strip(),
            "summary": "一言でいうと、「共感と問題解決をその都度どちらに寄せるか決めていくペア」です。"
        },
        "values_gap": {
            "body": """
{your_name} さんは、人とのつながりやその場の空気感を大切にし、
「心が動くかどうか」で物事を選びやすい価値観を持っています。
{partner_name} さんは、現実的なメリットや効率、
長期的に見て得になるかどうかを基準に判断することが多いタイプです。
そのため、お金の使いどころや仕事・趣味の優先順位について、
「気持ちを優先したい」と「結果を優先したい」で意見が分かれる場面が
あるかもしれません。ただし、その違いは、感情に寄りすぎることも、
損得だけで動いてしまうことも防いでくれるバランスでもあります。
二人で視点を持ち寄ることで、心も現実も納得できる選択肢を
見つけやすくなります。
""".strip(),
            "summary": "一言でいうと、「感情軸と現実軸の両方を持てるようになるペア」です。"
        },
    },
}


def get_page4_blocks(pattern: str) -> dict[str, dict[str, str]]:
    """
    Page4 用のブロック一式を取得する関数。

    pattern:
        "Base" / "C" / "D" を想定。
        それ以外が来た場合は Base を返す。

    戻り値:
        {
          "talk_tempo": {"body": str, "summary": str},
          "problem_style": {"body": str, "summary": str},
          "values_gap": {"body": str, "summary": str},
        }
    """
    if not pattern:
        key = "Base"
    else:
        key = pattern.strip()
    if key not in PAGE4_TEMPLATES:
        key = "Base"
    return PAGE4_TEMPLATES[key]
