# -*- coding: utf-8 -*-
"""
Page 3 - A案（太陽 × 月 × 上昇）テンプレート庫
自動組み合わせ用：build_page3_a(sun, moon, asc)
"""

# ─────────────────────────────────────────
#  太陽 A案：12星座
# ─────────────────────────────────────────

SUN_A = {
    "aries": """
おひつじ座は「スピード・率直さ・行動の早さ」を重視し、思い立った気持ちをすぐ形にしたいタイプ。相手はもう少し慎重で、安心や安定を確認してから進みたい傾向があります。あなたは火をつける側、相手はその火を落ち着かせる側。
核心の差異：あなたは即行動、相手は確実性を求める。
""",

    "taurus": """
おうし座は「安定・継続・生活の安心感」を第一に考え、ゆっくり丁寧に関係を育てたいタイプ。相手は変化や刺激、精神的なつながりを重視しやすい傾向があります。あなたは根を張りたい、相手は風通しを保ちたい。
核心の差異：あなたは安定、相手は自由度を求める。
""",

    "gemini": """
ふたご座は「会話・好奇心・軽やかな交流」を大切にし、言葉のキャッチボールで関係を深めます。相手は感情の安定や行動で示される安心を重視しがち。あなたは心の動きを言葉で共有したい、相手は温度感でつながりたい。
核心の差異：あなたは知的刺激、相手は情緒的安定を求める。
""",

    "cancer": """
かに座は「情緒的なつながり・家族感・守り合う関係」を求め、心の距離の近さが大事。相手はより独立的だったり、目的や個人のペースを優先する傾向があります。あなたは寄り添いたい、相手は自分のリズムも保ちたい。
核心の差異：あなたは情緒の深さ、相手は境界線を大事にする。
""",

    "leo": """
しし座は「誠意・尊重・特別感」を重視し、愛情は堂々と表現したいタイプ。相手はもう少し控えめで、実務的・安定的な形で関係を築こうとすることがあります。あなたは輝きで伝える、相手は継続で示す。
核心の差異：あなたは熱量、相手は安定を重視。
""",

    "virgo": """
おとめ座は「整えること・責任感・日常の習慣」を重視し、現実的に続く関係を求めます。相手はもっと感覚的・ロマンチック・その場の気持ちを重視するタイプかもしれません。あなたは計画性、相手は雰囲気重視。
核心の差異：あなたは実務性、相手は体験価値を求める。
""",

    "libra": """
てんびん座は「調和・距離感・心地よい空気」を大切にし、お互いのバランスを取ろうとします。相手はもっと直接的・感情的・実利的な価値観を持つ場合があります。あなたは関係を整える人、相手は自分の気持ちを優先する人。
核心の差異：あなたは“ふたりの調和”、相手は“自分の実感”を重視。
""",

    "scorpio": """
さそり座は「深い信頼・一対一の絆・覚悟」を重視し、関係に対して真剣。相手はもっと軽やか・開放的・柔軟なスタイルを望むことがあります。あなたは深く潜りたい、相手は呼吸できる余白を求める。
核心の差異：あなたは深度、相手は自由度を重視。
""",

    "sagittarius": """
いて座は「自由・成長・率直さ」を大切にし、束縛よりも冒険心を優先します。相手は安定・予測可能性・安全領域を大事にする傾向があります。あなたは外に広げたい、相手は地面を固めたい。
核心の差異：あなたは自由感、相手はコントロール感を重視。
""",

    "capricorn": """
やぎ座は「責任・現実性・将来設計」を軸に動き、関係が長期的に成立するかを重視します。相手はもっと感情的・幻想的・その時の気持ちを優先しがち。あなたは未来を見る、相手は今を感じたい。
核心の差異：あなたは実現性、相手は情緒性を重視。
""",

    "aquarius": """
みずがめ座は「独立性・思想の自由・距離の心地よさ」を重視します。相手は感情の近さ・頻度・一体感を求めるかもしれません。あなたは自由に育てたい、相手は寄り添いを強めたい。
核心の差異：あなたは精神的自由、相手は情緒的つながりを重視。
""",

    "pisces": """
うお座は「共感・ロマン・心の一体感」を大切にし、感情の流れを共有したいタイプ。相手はもっと理性的・現実的・構造的に関係を捉えることがあります。あなたは感覚で動く、相手は計画で動く。
核心の差異：あなたは感受性、相手は構造性を重視。
"""
}

# ─────────────────────────────────────────
#  月 A案：12星座
# ─────────────────────────────────────────

MOON_A = {
    "aries": """
おひつじ座の月は、気持ちが湧いた瞬間に表へ出やすく、反応も早め。ストレートに言ってスッキリしたいタイプです。相手はもう少し落ち着いてから感情を整理する傾向があり、急な温度差に戸惑うことも。
核心の差異：あなたは即反応、相手はゆっくり咀嚼するタイプ。
""",

    "taurus": """
おうし座の月は、安心感と一定のリズムが心の安定源。急な変化や強い感情表現は少し苦手です。相手はもっと気持ちの起伏があり、その都度共有したいタイプかもしれません。
核心の差異：あなたは穏やかさ重視、相手は感情の即時共有を求める。
""",

    "gemini": """
ふたご座の月は、気持ちを言葉にして軽く整理したいタイプ。深刻に抱え込むより、会話や情報で気分転換します。相手は感情を深く味わう傾向があり、静かに寄り添ってほしい時も。
核心の差異：あなたは言語化で整理、相手は情緒の深さを重視。
""",

    "cancer": """
かに座の月は、相手の態度や温度に敏感で、心が揺れやすいタイプ。安心できる環境が何より大事です。相手はもっと理性的に距離を測る傾向があり、温度差が誤解を生むことも。
核心の差異：あなたは情緒の近さ、相手は理性的な調整を求める。
""",

    "leo": """
しし座の月は、心が動くと大きく表現したくなり、愛情も不安も分かち合いたいタイプ。相手は控えめで、感情を小さく管理したい傾向があります。
核心の差異：あなたは感情表現が華やか、相手は静かな安定を求める。
""",

    "virgo": """
おとめ座の月は、気持ちを整理しながら現実的に対処したいタイプ。感情の混乱が続くと負担を感じやすい。相手はもっと直感的・衝動的に反応し、温度差が生まれることも。
核心の差異：あなたは整理型、相手は反射型の情緒。
""",

    "libra": """
てんびん座の月は、心がざわついても表面を整えようとし、波風を避けたいタイプ。相手は感情を隠さずに出す傾向があり、その強さに疲れることもあります。
核心の差異：あなたは調和優先、相手は感情の率直さを求める。
""",

    "scorpio": """
さそり座の月は、内面の揺れが深く、表には出さなくても心の動きは濃いタイプ。相手はもっと軽やかで感情をその都度発散したいかもしれません。
核心の差異：あなたは深く抱える、相手は軽く流す。
""",

    "sagittarius": """
いて座の月は、気分が変われば気持ちを切り替えられ、溜め込むより外へ動いて解消するタイプ。相手は繊細で、感情を抱えながらゆっくり回復する傾向があります。
核心の差異：あなたは切り替え型、相手は熟成型の情緒。
""",

    "capricorn": """
やぎ座の月は、感情をコントロールし、冷静さを保とうとするタイプ。弱さを見せる前にまず状況を整えたい。相手は気持ちを共有して安心したいタイプで、あなたの沈黙を不安に感じることも。
核心の差異：あなたは抑制、相手は共感を求める。
""",

    "aquarius": """
みずがめ座の月は、感情に距離を置き、客観的に理解しようとするタイプ。相手はもっと感情的で、リアルな反応や温度を求めるかもしれません。
核心の差異：あなたは客観性、相手は情緒の密度を重視。
""",

    "pisces": """
うお座の月は、感情に敏感で、相手の気持ちにも染まりやすいタイプ。共感や寄り添いが安心につながります。相手はもっと理性的に線を引こうとする傾向があり、その冷静さが寂しく感じられる時も。
核心の差異：あなたは共感重視、相手は理性重視。
"""
}

# ─────────────────────────────────────────
#  上昇 A案：4分類
# ─────────────────────────────────────────

ASC_A = {
    "fire": """
火の上昇は、明るく前向きで、エネルギーを感じさせる雰囲気。最初から距離を縮めるのが早く、行動もストレートです。相手はもう少し落ち着いたテンポや慎重さを大切にするタイプかもしれません。
核心の差異：あなたは勢い型、相手は安定型の第一印象。
""",

    "earth": """
地の上昇は、落ち着き・誠実さ・安定感が第一印象に出やすく、ゆっくり距離を縮めるタイプ。相手はもっと開放的・軽快な雰囲気かもしれません。あなたの慎重さが安心を与える一方で、相手はもう少しスピード感を求める場合も。
核心の差異：あなたは慎重型、相手は軽快型の第一印象。
""",

    "air": """
風の上昇は、話しやすさ・柔らかさ・知的な軽さが魅力として出やすいタイプ。相手はもっと情緒的・感覚的で、温度の高いコミュニケーションを求めることがあります。あなたは距離の取り方が上手、相手は近さを大事にする傾向。
核心の差異：あなたは軽やか、相手は情緒的な近さを求める。
""",

    "water": """
水の上昇は、柔らかく優しい雰囲気があり、相手の気持ちを自然に受け取るタイプ。相手はもっと理性的・客観的に距離を測る傾向があり、あなたの柔らかさを深く感じ取れないことも。
核心の差異：あなたは情緒的、相手は理性的な第一印象。
"""
}

# ─────────────────────────────────────────
#  上昇の星座 → 4分類へ変換
# ─────────────────────────────────────────

def get_asc_group(asc_sign: str) -> str:
    asc_sign = asc_sign.lower()

    if asc_sign in ["aries", "leo", "sagittarius"]:
        return "fire"
    if asc_sign in ["taurus", "virgo", "capricorn"]:
        return "earth"
    if asc_sign in ["gemini", "libra", "aquarius"]:
        return "air"
    if asc_sign in ["cancer", "scorpio", "pisces"]:
        return "water"

    return "air"  # fallback（エラー防止）


# ─────────────────────────────────────────
#  Page3 A案 自動組み合わせ
# ─────────────────────────────────────────

def build_page3_a(sun_sign: str, moon_sign: str, asc_sign: str) -> str:
    """
    Page3（A案）
    太陽段 + 月段 + 上昇段 を自動合成して返す
    """

    sun_sign = sun_sign.lower()
    moon_sign = moon_sign.lower()
    asc_sign = asc_sign.lower()

    asc_group = get_asc_group(asc_sign)

    sun_text = SUN_A.get(sun_sign, "")
    moon_text = MOON_A.get(moon_sign, "")
    asc_text = ASC_A.get(asc_group, "")

    return (
        sun_text.strip()
        + "\n\n"
        + moon_text.strip()
        + "\n\n"
        + asc_text.strip()
    )
